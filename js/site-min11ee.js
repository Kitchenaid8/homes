function checkHid(e){var t=(e=new URLSearchParams(window.location.search)).get("hid"),n=e.get("sid"),i=e.get("pub"),o=e.get("c1"),a=e.get("c2"),s=e.get("c3");return!(!t&&n&&i)||(window.location.replace("/nlink.php?sid="+n+"&pub="+i+"&c1="+o+"&c2="+a+"&c3="+s+"&np=2"),!1)}function sendEvent(e,t){if("function"==typeof gtag){var n=window.location.pathname.split("/")[1],i=new URLSearchParams(window.location.search).get("bc");i&&(i=i.replace(" ","+"),n=n+"?bc="+i),e.hasClass("bademail")?n+="_email_reentry":e.find(":input").each((function(){"button"!=$(this).prop("type")&&"submit"!=$(this).prop("type")&&"dob_text"!=$(this).prop("name")&&("radio"==$(this).prop("type")||"checkbox"==$(this).prop("type")?$(this).is(":checked")&&(n+="_"+$(this).prop("name")):n+="_"+$(this).prop("name"))})),gtag("event",n)}}function validate_phone(e){return e.parents("form").hasClass("skemv")?new Promise(((e,t)=>{e(!0)})):($(".palert").remove(),new Promise(((t,n)=>{0!=e.find("input#questionphone_number").length?$.ajax({url:"/format.php?k="+$("#kversion").text()+"&p="+$("#questionphone_number").val().replace(/\s/g,""),success:function(e){"bad"==e?($("#questionphone_number").after('<div class="alert palert">Your number appears to be on a Do Not Call list. Please enter a number where we can reach you.</div>'),t(!1)):t(!0)}}):t(!0)})))}function validate_email(e){return e.parents("form").hasClass("skphv")?new Promise(((e,t)=>{e(!0)})):($(".ealert").remove(),new Promise(((t,n)=>{0!=e.find("input#questionemail").length?$.ajax({url:"/format.php?k="+$("#kversion").text()+"&e="+$("#questionemail").val(),success:function(e){"bad"==e?($("#questionemail").after('<div class="alert ealert">Your email address appears to be invalid. Please enter a valid email address.</div>'),t(!1)):t(!0)}}):t(!0)})))}function checkConfirmations(e){return noconfirms=!0,$("fieldset").each((function(){$(this).find(".questioncheck").length>0&&(check=$(this).find(".questioncheck"),check.attr("data-actext").length>0?ac='<p><input type="checkbox" required><label>'+check.attr("data-actext")+"</label></p>":ac="","questiondatealert"==check.attr("data-type")&&Date.parse($(check.attr("data-field")).val())<=Date.parse(check.attr("data-date"))&&($(this).append('<div class="confirm hidden">'+check.attr("data-confirmtext")+ac+"</div>"),check.remove(),noconfirms=!1),"questionconfirm"==check.attr("data-type")&&$(check.attr("data-button").replace(/\+/g,"\\+")).is(":checked")&&($(this).append('<div class="confirm hidden">'+check.attr("data-confirmtext")+ac+"</div>"),check.remove(),noconfirms=!1),$(".confirm").slideDown("fast"),$(this).parents(".qgroup").find(".next").show())})),noconfirms}function nextNode(e,t){return"next"==t&&(nextnode=e.next(),groups=e.nextAll(".qgroup")),"prev"==t&&(nextnode=e.prev(),groups=e.prevAll(".qgroup")),groups.each((function(){return cmatch=!1,group=$(this),group.attr("data-nodeconditions")?(nodeconds=group.attr("data-nodeconditions"),nodeconds=nodeconds.split(","),$(nodeconds).each((function(){if(nodecond=this.split("="),nodecond[0]&&nodecond[1]&&$('input[name="'+nodecond[0]+'"]:checked').val()==nodecond[1])return cmatch=!0,!1})),1==cmatch?(nextnode=group,!1):void 0):(nextnode=group,!1)})),e.slideUp("fast"),nextnode.slideDown("fast"),updateStep(),$(".confirm").remove(),!0}function validate_node2(e,t){var n=!0;return e.find(".alert").remove(),e.find(":input").each((function(){if($this=$(this),validity=$this.get(0).checkValidity(),0==validity)return $this.get(0).reportValidity(),mobileCheck()&&$("html, body").scrollTop($this.offset().top-80),n=!1,!1;if($this.is("#questionemail")&&datastore($(this)),"dob"==$this.prop("name")){if(parseInt(getAge($this.val()))<18)return alert("You must be 18 or older."),n=!1,!1;datastore($(this))}else datastore($(this))})),1==n&&e.find(".checkboxes").each((function(){if($(this).hasClass("required")&&0===$(this).find('input[type="checkbox"]:checked').length)return $firstinput=$(this).parents("fieldset").find(":input:first"),$firstinput.get(0).setCustomValidity("Please choose at least one."),$firstinput.get(0).reportValidity(),mobileCheck()&&$("html, body").scrollTop($firstinput.offset().top-80),n=!1,!1})),1==n&&(!!checkConfirmations(e)&&(sendEvent(e,t),!!checkHid()&&("naked"==t?(e.hide(),e.next().show(),updateStep(),$(".confirm").remove(),!0):"final"==t||"part"==t?($(".confirm").remove(),!0):(nextNode(e,"next"),void $("html, body").scrollTop($("#formquestions").offset().top-80)))))}function datastore(e){"radio"==e.prop("type")||"checkbox"==e.prop("type")?e.prop("checked")&&sessionStorage.setItem(e.attr("name"),e.val()):"select-one"==e.prop("type")?sessionStorage.setItem(e.attr("name"),e.find("option:selected").val()):sessionStorage.setItem(e.attr("name"),e.val())}function dataget(){$(".qgroup :input").each((function(){"submit"!=$(this).prop("type")&&("radio"==$(this).prop("type")||"checkbox"==$(this).prop("type")?null!=sessionStorage.getItem($(this).prop("name"))&&sessionStorage.getItem($(this).prop("name"))==$(this).val()&&($(this).attr("checked",!0),$(this).parent().addClass("checked")):null!=sessionStorage.getItem($(this).prop("name"))&&$(this).val(sessionStorage.getItem($(this).prop("name"))))}))}function getAge(e){var t=new Date,n=new Date(e),i=t.getFullYear()-n.getFullYear(),o=t.getMonth()-n.getMonth();return(o<0||0===o&&t.getDate()<n.getDate())&&i--,i}function formSubmit(){form=$(".activeform"),$(".alert").remove(),form.hasClass("fullform")?node=form.find(".qgroups"):node=form.find(".qgroup").last(),type="final",val="ok",validate_phone(node).then((e=>{validate_email(node).then((t=>1!=e||1!=t?(form.removeClass("loading"),!1):(val=validate_node2(node,type),val?(lctnnw&&setTimeout((()=>{window.open("thankyou?lctn=nw&"+universalParams())})),void $("form#formquestions").submit()):(form.removeClass("loading"),!1))))}))}function getPercent(){var e=$("#formquestions .qgroup").length-1;return $("#formquestions .qgroup:visible").last().index()/e*100}function getStep(){return $("#formquestions .qgroup:visible").last().index()}function updateStep(){if($(".progressbox").length>0){var e=getPercent();$(".progress").css({width:e+"%"}),$(".progresstext .percent").text(~~e)}else $(".pnumberbar").length>0&&$(".active").parents(".pnumber").next().find(".pnum").addClass("active")}function setDate(e){formattedField=e.parents("fieldset").find(".formatted"),formattedField.val(e.val().replace(/^(\d\d)(\d)$/g,"$1/$2").replace(/^(\d\d\/\d\d)(\d+)$/g,"$1/$2").replace(/[^\d\/]/g,"")),formattedField.val(e.val().replace(/(\d\d)\/(\d\d)\/(\d{4})/,"$3-$1-$2"))}function universalParams(){var e={dateTime:!0,userAgent:!0,domain:!0,platform:!0,signup_date:!0,hpqstring:!0,qstring:!0,passthroughString:!0,agentid:!0,"g-recaptcha-response":!0,refsendid:!0};return $("#formquestions").find(":input").filter((function(t,n){return!e[n.name]})).serialize()}function anirotate(e,t){$({deg:0}).animate({deg:t},{duration:200,step:function(t){e.css({transform:"rotate("+t+"deg)"})}})}function setOfferButtons(){$(".customofferbuttons a").on("click",(function(e){$("#modal").hide()})),$(".customofferbuttons a.no").on("click",(function(e){return e.preventDefault(),$("#modal").hide(),window.open(window.location.href),window.location.href=$(this).attr("href"),!1}))}function setHero(){$(window).width()>800?(formheight=$("section.form_intro .form").height(),introheight=$("section.form_intro .intro").height(),$("section.form_intro .intro").length>0?formheight>introheight?(newformheight=formheight,newintroheight=formheight):(newformheight=introheight,newintroheight="auto"):(newformheight=formheight,newintroheight=formheight),$("div#hero").css({"max-height":newformheight,"min-height":newformheight,height:newformheight}),$("section.form_intro .intro").css({"max-height":newintroheight,"min-height":newintroheight,height:newintroheight})):($("div#hero").css({"max-height":"150px","min-height":"150px",height:"150px"}),$("section.form_intro .intro").css({"max-height":"auto","min-height":"auto",height:"auto"}))}function otherRadio(){$(".othertext").on("keyup",(function(){$(this).parents("fieldset").prev().find(".other").find("input").val($(this).val()),$(this).parents("fieldset").prev().find(".other").find("label").text($(this).val())}))}function otherSelect(){$(".othertext").on("keyup",(function(){$(this).parents("fieldset").prev().find(".otherselect").val($(this).val()),$(this).parents("fieldset").prev().find(".otherselect").text($(this).val())}))}function radioClick(){$(".radio").on("click",(function(){return $(this).hasClass("other")||($(this).parents(".qgroup").find(".other").find("input").val("other"),$(this).parents(".qgroup").find(".other").find("label").text("Other"),$(this).parents(".qgroup").find(".othertext").parents("fieldset").remove()),$(this).parent("fieldset").find("input").each((function(){$(this).hasClass("nextcheck")||($(this).attr("checked",!1),$(this).parent(".radio").removeClass("checked"))})),$(this).addClass("checked"),$(this).find("input").attr("checked",!0),$(this).hasClass("nextradio")&&(node=$(this).closest(".qgroup"),type="",validate_phone(node).then((e=>{validate_email(node).then((t=>{1==e&&1==t&&validate_node2(node,type)}))}))),!0}))}function mobileCheck(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}var qstring=window.location.search;qstring=qstring.replace("?","");var urlParams=new URLSearchParams(window.location.search);$(document).ready((function(){var e=$("html, body");if($("a.scroller").click((function(){var t=$.attr(this,"href");return e.animate({scrollTop:$(t).offset().top},500,(function(){window.location.hash=t})),!1})),$(".phonefield input").toArray().forEach((function(e){new Cleave(e,{phone:!0,phoneRegionCode:"us"})})),$("#modal a.close, .customofferbuttons a").on("click",(function(e){return e.preventDefault(),$("#modal .modalcontent").html(""),$("#modal").hide(),!1})),$("a.offer.modal").click((function(e){return e.preventDefault(),$("#modal").show(),modalclass="."+$(this).attr("data-modal"),$("#modal .modalcontent").html($(modalclass).html()),setOfferButtons(),!1})),$(".toggler").on("click",(function(e){return e.preventDefault(),$("#"+$(this).attr("data-toggle")).is(":hidden")?($("#"+$(this).attr("data-toggle")).show(),$(this).find("img").css({transform:"rotate(90deg)"})):($("#"+$(this).attr("data-toggle")).hide(),$(this).find("img").css({transform:"rotate(0deg)"})),!1})),$(".toggler").each((function(){$("#"+$(this).attr("data-toggle")).is(":visible")&&$(this).find("img").css({transform:"rotate(90deg)"})})),$(".other").on("click",(function(e){otherfield=$(this),$(this).parents("fieldset").removeClass("radios"),0==$(this).parents(".qgroup").find(".othertext").length&&$(this).parents("fieldset").after('<fieldset><label>Please describe.</label><input type="text" class="othertext" name="othertext_'+$(this).find("input").attr("name")+'" required></fieldset>'),$(this).parents("fieldset").find(".radio").removeClass("nextradio"),$(this).parents(".qgroup").find(".buttons button").show()})),$("#formquestions select").on("change",(function(e){$(this).find(":selected").hasClass("otherselect")?($(this).parents("fieldset").after('<fieldset><label>Please describe.</label><input type="text" class="othertext" name="othertext_'+$(this).attr("name")+'" required></fieldset>'),$(this).removeClass("nextselect"),$(this).parents(".qgroup").find("button.next").show()):($(this).parents(".qgroup").find(".otherselect").val("other"),$(this).parents(".qgroup").find(".otherselect").text("Other"),$(this).parents(".qgroup").find(".othertext").parents("fieldset").remove(),$(this).hasClass("nextselect")&&(node=$(this).closest(".qgroup"),type="",validate_phone(node).then((e=>{validate_email(node).then((t=>{1==e&&1==t&&validate_node2(node,type)}))}))))})),$("#formquestions").hasClass("nextradio")&&$("#formquestions .qgroup").each((function(){lastfield=$(this).find("fieldset").last(),lastfield.hasClass("radios")&&0==$(this).find(":submit").length&&(lastfield.find(".radio").each((function(){$(this).find("input").hasClass("confirm")||$(this).addClass("nextradio")})),$("#formquestions").hasClass("nextbutton")||$(this).find("button.next:not(.opt)").hide()),lastfield.hasClass("select")&&0==$(this).find(":submit").length&&(lastfield.find("select").addClass("nextselect"),$("#formquestions").hasClass("nextbutton")||$(this).find("button.next:not(.opt)").hide())})),$(".checkboxes input[type=checkbox]").on("change",(function(){$this=$(this).parents("fieldset").find(":input:first"),$this.get(0).setCustomValidity("")})),$(".singlechecked input[type=checkbox]").prop("checked",!0),$(".radio",".checkbox").each((function(){$(this).find("input").is(":checked")&&$(this).addClass("checked")})),radioClick(),$(".next").on("click",(function(e){return e.preventDefault(),node=$(this).closest(".qgroup"),type="",validate_phone(node).then((e=>{validate_email(node).then((t=>{1==e&&1==t&&validate_node2(node,type)}))})),!1})),$(".previous").on("click",(function(e){return e.preventDefault(),node=$(this).closest(".qgroup"),nextNode(node,"prev"),!1})),$(".pnumbers").length>0){var t=$("#formquestions .qgroup");$(t).each((function(e){e+=1,$(".pnumbers").append('<div class="pnumber"><div class="pnum" id="pnum'+e+'">'+e+"</div></div>"),$("#pnum1").addClass("active")}))}$(".questionDate").length>0&&$(".questionDate").toArray().forEach((function(e){new Cleave(e,{date:!0,delimiter:"/",datePattern:["m","d","Y"]})})),$(".showmore").on("click",(function(e){return e.preventDefault(),$(this).hide(),$("."+$(this).attr("data-show")).slideDown("fast"),!1})),new URLSearchParams(window.location.search).get("next")&&(type="naked",dataget(),node=$(".qgroup").first(),validate_phone(node).then((e=>{validate_email(node).then((t=>{1==e&&1==t&&validate_node2($(".qgroup").first(),type)}))}))),$(".questionDate").on("keyup",(function(){setDate($(this))})),$("#form-submit").on("click",(function(e){if($(this).parents("form").addClass("activeform"),$(this).parents("form").addClass("loading"),e.preventDefault(),$(this).hasClass("recaptcha"))return window.grecaptcha.reset(),window.grecaptcha.execute(recaptchaId),!1;"function"==typeof fbLeadEvent&&fbLeadEvent(),"function"==typeof qp&&qp("track","GenerateLead"),"undefined"!=typeof submitdelaytime?setTimeout((()=>{formSubmit()}),submitdelaytime):formSubmit()})),$(".confirm").on("click",(function(e){if($(this).hasClass("confirm"))return $(this).parents("fieldset").find(":input").each((function(){$(this).attr("checked",!1),$(this).parents(".radio").removeClass("checked")})),$(this).removeClass("confirm"),$(this).parents("#formquestions").hasClass("nextradio")&&$(this).parents(".radio").addClass("nextradio"),alert($(this).attr("data-confirm")),radioClick(),!1})),$("#formquestions :input").each((function(){$(this).on("blur",(function(){$(this).val($(this).val().trim())}))})),$(window).scroll((function(e){$(window).scrollTop()>500?$(".floater").show():$(".floater").hide()})),$("select.multiple option").mousedown((function(e){return e.preventDefault(),$(this).prop("selected",!$(this).prop("selected")),!1})),$("select.multiple").on("click",(function(){$("option.taptochoose").attr("selected").remove()})),setHero()})),$(window).on("resize",(function(){setHero()}));